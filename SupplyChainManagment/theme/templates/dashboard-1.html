{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link
      rel="shortcut icon"
      href="{% static 'img/sc_logoblack.jpg' %}"
      type="image/x-icon"
    />
    <link
      rel="stylesheet"
      href="https://kit-pro.fontawesome.com/releases/v5.12.1/css/pro.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'css/style.css' %}"
    />
    <title>Chain360 | Ecommerce</title>
  </head>
  <body class="bg-gray-100">
    <!-- start navbar -->
    <div
      class="md:fixed md:w-full md:top-0 md:z-20 flex flex-row flex-wrap items-center bg-white p-6 border-b border-gray-300"
    >
      <!-- logo -->
      <div class="flex-none w-56 flex flex-row items-center">
        <img src="{% static 'img/logo360.png' %}" class="w-12 flex-none" />
        <strong class="capitalize ml-0 flex-1">Chain360</strong>

        <button
          id="sliderBtn"
          class="flex-none text-right text-gray-900 hidden md:block"
        >
          <i class="fad fa-list-ul"></i>
        </button>
      </div>
      <!-- end logo -->

      <!-- navbar content toggle -->
      <button id="navbarToggle" class="hidden md:block md:fixed right-0 mr-6">
        <i class="fad fa-chevron-double-down"></i>
      </button>
      <!-- end navbar content toggle -->

      <!-- navbar content -->
      <div
        id="navbar"
        class="animated md:hidden md:fixed md:top-0 md:w-full md:left-0 md:mt-16 md:border-t md:border-b md:border-gray-200 md:p-10 md:bg-white flex-1 pl-3 flex flex-row flex-wrap justify-between items-center md:flex-col md:items-center"
      >
        <!-- left -->
        <div
          class="text-gray-600 md:w-full md:flex md:flex-row md:justify-evenly md:pb-10 md:mb-10 md:border-b md:border-gray-200"
        >
          
        </div>
        <!-- end left -->

        <!-- right -->
        <div class="flex flex-row-reverse items-center">
          <!-- user -->
          <div class="dropdown relative md:static">
            <button
              class="menu-btn focus:outline-none focus:shadow-outline flex flex-wrap items-center"
            >
              <div class="w-8 h-8 overflow-hidden rounded-full">
                <img
                  class="w-full h-full object-cover"
                  src="{% static 'img/user.svg' %}"
                />
              </div>

              <div class="ml-2 capitalize flex">
                <h1
                  class="text-sm text-gray-800 font-semibold m-0 p-0 leading-none"
                >
                  {{ user_name }}
                </h1>
                <i class="fad fa-chevron-down ml-2 text-xs leading-none"></i>
              </div>
            </button>

            <button
              class="hidden fixed top-0 left-0 z-10 w-full h-full menu-overflow"
            ></button>

            <div
              class="text-gray-500 menu hidden md:mt-10 md:w-full rounded bg-white shadow-md absolute z-20 right-0 w-40 mt-5 py-2 animated faster"
            >
              <!-- item -->
              <a
                class="px-4 py-2 block capitalize font-medium text-sm tracking-wide bg-white hover:bg-gray-200 hover:text-gray-900 transition-all duration-300 ease-in-out"
                href="{% url 'edit_profile' %}"
              >
                <i class="fad fa-user-edit text-xs mr-1"></i>
                edit my profile
              </a>
              <!-- end item -->

              <!-- item -->

              <!-- end item -->

              <!-- item -->
              <a
                class="px-4 py-2 block capitalize font-medium text-sm tracking-wide bg-white hover:bg-gray-200 hover:text-gray-900 transition-all duration-300 ease-in-out"
                href="{% url 'notifications' %}"
              >
                <i class="fad fa-badge-check text-xs mr-1"></i>
                tasks
              </a>
              <!-- end item -->

              <!-- item -->

              <!-- end item -->

              <hr />

              <!-- item -->
              <a
                class="px-4 py-2 block capitalize font-medium text-sm tracking-wide bg-white hover:bg-gray-200 hover:text-gray-900 transition-all duration-300 ease-in-out"
                href="/users/logout/"
              >
                <i class="fad fa-user-times text-xs mr-1"></i>
                log out
              </a>
              <!-- end item -->
            </div>
          </div>
          <!-- end user -->

          <!-- notifcation -->
          <div class="dropdown relative mr-5 md:static">
            <button
              class="text-gray-500 menu-btn p-0 m-0 hover:text-gray-900 focus:text-gray-900 focus:outline-none transition-all ease-in-out duration-300 relative"
            >
              <i class="fad fa-bells"></i>
              {% if notifications and notifications|length > 0 %}
              <span
                class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5"
                >{{ notifications|length }}</span
              >
              {% endif %}
            </button>
            <button
              class="hidden fixed top-0 left-0 z-10 w-full h-full menu-overflow"
            ></button>

            <div
              class="menu hidden rounded bg-white md:right-0 md:w-full shadow-md absolute z-20 right-0 w-84 mt-5 py-2 animated faster fadeIn"
            >
              <!-- top -->
              <div
                class="px-4 py-2 flex flex-row justify-between items-center capitalize font-semibold text-sm"
              >
                <h1>notifications</h1>
                <div
                  class="bg-teal-100 border border-teal-200 text-teal-500 text-xs rounded px-1"
                >
                  <strong>{{ notifications|length }}</strong>
                </div>
              </div>
              <hr />
              <!-- end top -->

              <!-- body -->
              {% if notifications %} {% for n in notifications|slice:':4' %}
              <a
                class="flex flex-row items-center justify-start px-4 py-4 capitalize font-medium text-sm tracking-wide bg-white hover:bg-gray-200 transition-all duration-300 ease-in-out"
                href="{% if n.order_id %}/orders/{{ n.order_id }}/{% else %}#{% endif %}"
              >
                <div
                  class="px-3 py-2 rounded mr-3 bg-gray-100 border border-gray-300"
                >
                  <i class="fad {{ n.icon }} text-sm"></i>
                </div>

                <div class="flex-1 flex flex-rowbg-green-100">
                  <div class="flex-1">
                    <h1 class="text-sm font-semibold">{{ n.title }}</h1>
                    <p class="text-xs text-gray-500">{{ n.text }}</p>
                  </div>
                  <div class="text-right text-xs text-gray-500">
                    <p>{{ n.time }}</p>
                  </div>
                </div>
              </a>
              <hr />
              {% endfor %} {% else %}
              <div class="px-4 py-4 text-gray-500 text-sm">
                No notifications found.
              </div>
              {% endif %}
              <!-- end body -->

              <!-- bottom -->
              <div class="px-4 py-2 mt-2">
                <a
                  href="{% url 'notifications' %}"
                  class="border border-gray-300 block text-center text-xs uppercase rounded p-1 hover:text-teal-500 transition-all ease-in-out duration-500"
                >
                  view all
                </a>
              </div>
              <!-- end bottom -->
            </div>
          </div>
          <!-- end notifcation -->

          <!-- messages -->
          <div class="dropdown relative mr-5 md:static">


            <button
              class="hidden fixed top-0 left-0 z-10 w-full h-full menu-overflow"
            ></button>

            
              <!-- end bottom -->
            </div>
          </div>
          <!-- end messages -->
        </div>
        <!-- end right -->
      </div>
      <!-- end navbar content -->
    </div>
    <!-- end navbar -->

    <!-- strat wrapper -->
    <div class="h-screen flex flex-row flex-wrap">
      <!-- start sidebar -->
      <div
        id="sideBar"
        class="relative flex flex-col flex-wrap bg-white border-r border-gray-300 p-6 flex-none w-64 md:-ml-64 md:fixed md:top-0 md:z-30 md:h-screen md:shadow-xl animated faster"
      >
        <!-- sidebar content -->
        <div class="flex flex-col">
          <!-- sidebar toggle -->
          <div class="text-right hidden md:block mb-4">
            <button id="sideBarHideBtn">
              <i class="fad fa-times-circle"></i>
            </button>
          </div>
          <!-- end sidebar toggle -->

          <p class="uppercase text-xs text-gray-600 mb-4 tracking-wider">
            homes
          </p>

          <!-- link -->
          <a
            href="{% url 'dashboard' %}"
            class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500"
          >
            <i class="fad fa-chart-pie text-xs mr-2"></i>
            Analytics dashboard
          </a>
          <!-- end link -->

          <!-- link -->
          <a
            href="{% url 'dashboard_1' %}"
            class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500"
          >
            <i class="fad fa-shopping-cart text-xs mr-2"></i>
            ecommerce dashboard
          </a>
          <!-- end link -->

          <p class="uppercase text-xs text-gray-600 mb-4 mt-4 tracking-wider">
            apps
          </p>

          <!-- link -->
          <a
            href="{% url 'product_list' %}"
            class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500"
          >
            <i class="fad fa-envelope-open-text text-xs mr-2"></i>
            product
          </a>
          <!-- end link -->

          <!-- link -->

          <!-- end link -->

          <!-- link -->
          <a
            href="{% url 'inventory:inventory_list' %}"
            class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500"
          >
            <i class="fad fa-shield-check text-xs mr-2"></i>
            inventory
          </a>
          <!-- end link -->
          
          <!-- link -->
          <a
            href="{% url 'purchases:dashboard' %}"
            class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500"
          >
            <i class="fad fa-shopping-cart text-xs mr-2"></i>
            purchases
          </a>
          <!-- end link -->
          
          <a
            href="{% url 'order_list' %}"
            class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500"
          >
            <i class="fad fa-comments text-xs mr-2"></i>
            order
          </a>
          <!-- link -->
          <a
            href="{% url 'shipment_list' %}"
            class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500"
          >
            <i class="fad fa-calendar-edit text-xs mr-2"></i>
            shipment
          </a>
          <!-- end link -->

          <!-- link -->
          <a
            href="{% url 'invoice_list' %}"
            class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500"
          >
            <i class="fad fa-file-invoice-dollar text-xs mr-2"></i>
            invoice
          </a>
          <!-- end link -->

          <!-- link -->
          <a
            href="{% url 'supplier_list' %}"
            class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500"
          >
            <i class="fad fa-folder-open text-xs mr-2"></i>
            supplier
          </a>
          <!-- end link -->

          
          <!-- end link -->
        </div>
        <!-- end sidebar content -->
      </div>
      <!-- end sidbar -->

      <!-- strat content -->
      <div class="bg-gray-100 flex-1 p-6 md:mt-16">
        <!-- congrats & summary -->
        <div class="grid grid-cols-3 lg:grid-cols-1 gap-5">
          <!-- congrats -->
          <div class="card col-span-1">
            <div class="card-body h-full flex flex-col justify-between">
              <div>
                <h1 class="text-lg font-bold tracking-wide">
                  Greetings {{ user_name }}
                </h1>
                <p class="text-gray-600 mt-2">What you did this month</p>
              </div>

              <div class="flex flex-row mt-10 items-end">
                <div class="flex-1">
                  <h1 class="font-extrabold text-4xl text-teal-400">
                    ${{ sales_this_month|floatformat:0 }}
                  </h1>
                  <p class="mt-3 mb-4 text-xs text-gray-500">
                    You have done {{ percent_more_sales|floatformat:1 }}% more
                    sales this month.
                  </p>
                  <a href="{% url 'sales_details' %}" class="btn-shadow py-3"> view sales </a>
                </div>

                <div
                  class="flex-1 ml-10 w-32 h-32 lg:w-auto lg:h-auto overflow-hidden"
                >
                  <img
                    class="object-cover"
                    src="{% static 'img/congrats.svg' %}"
                  />
                </div>
              </div>
            </div>
          </div>
          <!-- end congrats -->
          <div
            class="card p-0 overflow-hidden col-span-2 lg:col-span-1 flex flex-row lg:flex-col"
          >
            <!-- right -->
            <div class="border-r border-gray-200 w-full lg:w-full lg:mb-5">
              <!-- top -->
              <div
                class="p-5 flex flex-row flex-wrap justify-between items-center"
              >
                <h2 class="font-bold text-lg">Customer Order Summary</h2>
                <div class="flex flex-row justify-center items-center">
                  <a
                    href="#"
                    id="btn-month"
                    class="btn mr-6 text-sm py-2 block active"
                    >month</a
                  >
                  <a
                    href="#"
                    id="btn-week"
                    class="btn-shadow text-sm py-2 block"
                    >week</a
                  >
                </div>
              </div>
              <!-- end top -->

              <!-- chart -->
              <div style="position: relative">
                <div id="SummaryChart"></div>
                <style type="text/css">
                  .apexcharts-flip-y {
                    transform: scaleY(-1) translateY(-100%);
                    transform-origin: top;
                    transform-box: fill-box;
                  }
                  .apexcharts-flip-x {
                    transform: scaleX(-1);
                    transform-origin: center;
                    transform-box: fill-box;
                  }
                  .apexcharts-legend {
                    display: flex;
                    overflow: auto;
                    padding: 0 10px;
                  }
                  .apexcharts-legend.apexcharts-legend-group-horizontal {
                    flex-direction: column;
                  }
                  .apexcharts-legend-group {
                    display: flex;
                  }
                  .apexcharts-legend-group-vertical {
                    flex-direction: column-reverse;
                  }
                  .apexcharts-legend.apx-legend-position-bottom,
                  .apexcharts-legend.apx-legend-position-top {
                    flex-wrap: wrap;
                  }
                  .apexcharts-legend.apx-legend-position-right,
                  .apexcharts-legend.apx-legend-position-left {
                    flex-direction: column;
                    bottom: 0;
                  }
                  .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left,
                  .apexcharts-legend.apx-legend-position-top.apexcharts-align-left,
                  .apexcharts-legend.apx-legend-position-right,
                  .apexcharts-legend.apx-legend-position-left {
                    justify-content: flex-start;
                    align-items: flex-start;
                  }
                  .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center,
                  .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {
                    justify-content: center;
                    align-items: center;
                  }
                  .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right,
                  .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {
                    justify-content: flex-end;
                    align-items: flex-end;
                  }
                  .apexcharts-legend-series {
                    cursor: pointer;
                    line-height: normal;
                    display: flex;
                    align-items: center;
                  }
                  .apexcharts-legend-text {
                    position: relative;
                    font-size: 14px;
                  }
                  .apexcharts-legend-text *,
                  .apexcharts-legend-marker * {
                    pointer-events: none;
                  }
                  .apexcharts-legend-marker {
                    position: relative;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    margin-right: 1px;
                  }
                  .apexcharts-legend-series.apexcharts-no-click {
                    cursor: auto;
                  }
                  .apexcharts-legend .apexcharts-hidden-zero-series,
                  .apexcharts-legend .apexcharts-hidden-null-series {
                    display: none !important;
                  }
                  .apexcharts-inactive-legend {
                    opacity: 0.45;
                  }
                </style>
              </div>
              <!-- end chart -->
            </div>
            <!-- end right -->

            <!-- end right -->
          </div>
        </div>
        <!-- end congrats & summary -->

        <!-- status -->
        <div class="grid grid-cols-5 gap-5 mt-5 lg:grid-cols-2">
          <!-- status -->
          <div class="card col-span-1">
            <div class="card-body">
              <h5 class="uppercase text-xs tracking-wider font-extrabold">
                today
              </h5>
              <h1 class="capitalize text-lg mt-1 mb-1">
                ${{ sales_today }}
                <span class="text-xs tracking-widest font-extrabold">
                  / {{ orders_today }} orders</span
                >
              </h1>
              <p class="capitalize text-xs text-gray-500">
                ( ${{ sales_today_last_year }} in the last year )
              </p>
            </div>
          </div>
          <!-- status -->

          <!-- status -->
          <div class="card col-span-1">
            <div class="card-body">
              <h5 class="uppercase text-xs tracking-wider font-extrabold">
                yesterday
              </h5>
              <h1 class="capitalize text-lg mt-1 mb-1">
                ${{ sales_yesterday }}
                <span class="text-xs tracking-widest font-extrabold">
                  / {{ orders_yesterday }} orders</span
                >
              </h1>
              <p class="capitalize text-xs text-gray-500">
                ( ${{ sales_yesterday_last_year }} in the last year )
              </p>
            </div>
          </div>
          <!-- status -->

          <!-- status -->
          <div class="card col-span-1">
            <div class="card-body">
              <h5 class="uppercase text-xs tracking-wider font-extrabold">
                last week
              </h5>
              <h1 class="capitalize text-lg mt-1 mb-1">
                ${{ sales_last_week }}
                <span class="text-xs tracking-widest font-extrabold">
                  / {{ orders_last_week }} orders</span
                >
              </h1>
              <p class="capitalize text-xs text-gray-500">
                ( ${{ sales_last_week_last_year }} in the last year )
              </p>
            </div>
          </div>
          <!-- status -->

          <!-- status -->
          <div class="card col-span-1">
            <div class="card-body">
              <h5 class="uppercase text-xs tracking-wider font-extrabold">
                last month
              </h5>
              <h1 class="capitalize text-lg mt-1 mb-1">
                ${{ sales_last_month }}
                <span class="text-xs tracking-widest font-extrabold">
                  / {{ orders_last_month }} orders</span
                >
              </h1>
              <p class="capitalize text-xs text-gray-500">
                ( ${{ sales_last_month_last_year }} in the last year )
              </p>
            </div>
          </div>
          <!-- status -->

          <!-- status -->
          <div class="card col-span-1 lg:col-span-2">
            <div class="card-body">
              <h5 class="uppercase text-xs tracking-wider font-extrabold">
                last 90-days
              </h5>
              <h1 class="capitalize text-lg mt-1 mb-1">
                ${{ sales_90_days }}
                <span class="text-xs tracking-widest font-extrabold">
                  / {{ orders_90_days }} orders</span
                >
              </h1>
              <p class="capitalize text-xs text-gray-500">
                ( ${{ sales_90_days_last_year }} in the last year )
              </p>
            </div>
          </div>
          <!-- status -->
        </div>
        <!-- end status -->

        <!-- best seller & traffic -->
        <div class="grid grid-cols-2 lg:grid-cols-1 gap-5 mt-5">
          <div class="card">
            <div class="card-body">
              <div class="flex flex-row justify-between items-center">
                <h1 class="font-extrabold text-lg">best sellers</h1>
                <a href="{% url 'dashboard' %}" class="btn-gray text-sm">view all</a>
              </div>

              <table class="table-auto w-full mt-5 text-right">
                <thead>
                  <tr>
                    <td class="py-4 font-extrabold text-sm text-left">
                      product
                    </td>
                    <td class="py-4 font-extrabold text-sm">price</td>
                    <td class="py-4 font-extrabold text-sm">sold</td>
                    <td class="py-4 font-extrabold text-sm">profit</td>
                  </tr>
                </thead>

                <tbody>
                  {% for item in best_sellers %}
                  <tr>
                    <td
                      class="py-4 text-sm text-gray-600 flex flex-row items-center text-left"
                    >

                      {{ item.name }}
                    </td>
                    <td class="py-4 text-xs text-gray-600">
                      ${{ item.price }}
                    </td>
                    <td class="py-4 text-xs text-gray-600">
                      {{ item.total_sold }}
                    </td>
                    <td class="py-4 text-xs text-gray-600">
                      ${{ item.total_profit }}
                    </td>
                  </tr>
                  {% empty %}
                  <tr>
                    <td colspan="4" class="text-center py-4 text-gray-400">
                      No sales data
                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
          <div class="card">
            <div class="card-body">
              <h2 class="font-bold text-lg mb-10">Recent Orders</h2>

              <!-- start a table -->
              <table class="table-fixed w-full">
                <!-- table head -->
                <thead class="text-left">
                  <tr>
                    <th
                      class="w-1/6 pb-10 text-sm font-extrabold tracking-wide"
                    >
                      order ID
                    </th>
                    <th
                      class="w-1/4 pb-10 text-sm font-extrabold tracking-wide text-right"
                    >
                      Products
                    </th>
                    <th
                      class="w-1/4 pb-10 text-sm font-extrabold tracking-wide text-right"
                    >
                      Invoice
                    </th>
                    <th
                      class="w-1/4 pb-10 text-sm font-extrabold tracking-wide text-right"
                    >
                      price
                    </th>
                    <th
                      class="w-1/4 pb-10 text-sm font-extrabold tracking-wide text-right"
                    >
                      status
                    </th>
                  </tr>
                </thead>
                <!-- end table head -->

                <!-- table body -->
                <tbody class="text-left text-gray-600">
                  {% for order in recent_orders|slice:':5' %}
                  <tr>
                    <td
                      class="mb-4 text-xs font-extrabold tracking-wider flex flex-row items-center w-full"
                    >

                      </div>
                      <span class="ml-3 name-1"
                        >#{{  order.id }}</span
                      >
                    </td>
                    <td
                      class="w-1/4 mb-4 text-xs font-extrabold tracking-wider text-right"
                    >
                      <ul>
                        {% for item in order.items.all|slice:':1' %}
                        <li>{{ item.product.name }} ({{ item.quantity }})</li>
                        {% endfor %}
                        {% if order.items.count > 1 %}
                        <li>+ {{ order.items.count|add:'-1' }} more</li>
                        {% endif %}
                      </ul>
                    </td>
                    <td
                      class="w-1/4 mb-4 text-xs font-extrabold tracking-wider text-right"
                    >
                      {% if order.invoice %}#{{ order.invoice.invoice_number}}{% else %}-{% endif %}
                    </td>
                    <td
                      class="w-1/4 mb-4 text-xs font-extrabold tracking-wider text-right"
                    >
                      {% if order.invoice %}${{ order.invoice.amount }}{% else %}-{% endif %}
                    </td>
                    <td
                      class="w-1/4 mb-4 text-xs font-extrabold tracking-wider text-right"
                    >
                      {{ order.get_status_display }}
                    </td>
                  </tr>
                  {% empty %}
                  <tr>
                    <td colspan="5" class="text-center py-4 text-gray-400">
                      No recent orders
                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
                <!-- end table body -->
              </table>
              <!-- end a table -->
            </div>
          </div>
        </div>
        <!-- end best seller & traffic -->
      </div>
      <!-- end content -->
    </div>
    <!-- end wrapper -->

    <!-- script -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="{% static 'js/scripts.js' %}"></script>
    <script id="order-summary-days" type="application/json">
      {{ days_in_month|safe }}
    </script>
    <script id="order-summary-sales" type="application/json">
      {{ sales_per_day|safe }}
    </script>
    <script id="order-summary-weekdays" type="application/json">
      {{ last_7_days_labels|safe }}
    </script>
    <script id="order-summary-weekly-sales" type="application/json">
      {{ last_7_days_sales|safe }}
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var daysScript = document.getElementById("order-summary-days");
        var salesScript = document.getElementById("order-summary-sales");
        var weekDaysScript = document.getElementById("order-summary-weekdays");
        var weekSalesScript = document.getElementById(
          "order-summary-weekly-sales"
        );
        var btnMonth = document.getElementById("btn-month");
        var btnWeek = document.getElementById("btn-week");
        var chartInstance = null;
        function renderChart(type) {
          var categories, data, title;
          if (type === "week") {
            categories = JSON.parse(weekDaysScript.textContent.trim());
            data = JSON.parse(weekSalesScript.textContent.trim());
            title = "This Week";
          } else {
            categories = JSON.parse(daysScript.textContent.trim());
            data = JSON.parse(salesScript.textContent.trim());
            title = "This Month";
          }
          if (chartInstance) chartInstance.destroy();
          chartInstance = new ApexCharts(
            document.querySelector("#SummaryChart"),
            {
              chart: { type: "area", height: 250 },
              series: [{ name: "Sales", data: data }],
              xaxis: {
                categories: categories,
                title: {
                  text: type === "week" ? "Day of Week" : "Day of Month",
                },
              },
              yaxis: { title: { text: "Sales ($)" } },
              colors: ["#22c55e"], // rich green (Tailwind emerald-500)
              title: {
                text: title,
                align: "left",
                style: { fontSize: "16px", fontWeight: "bold" },
              },
              dataLabels: { enabled: false },
              stroke: { curve: "smooth" },
              grid: { borderColor: "#e5e7eb" },
            }
          );
          chartInstance.render();
        }
        btnMonth.addEventListener("click", function (e) {
          e.preventDefault();
          btnMonth.classList.add("active");
          btnMonth.classList.remove("btn-shadow");
          btnWeek.classList.remove("active");
          btnWeek.classList.add("btn-shadow");
          renderChart("month");
        });
        btnWeek.addEventListener("click", function (e) {
          e.preventDefault();
          btnWeek.classList.add("active");
          btnWeek.classList.remove("btn-shadow");
          btnMonth.classList.remove("active");
          btnMonth.classList.add("btn-shadow");
          renderChart("week");
        });
        renderChart("month");
      });
    </script>
    <!-- end script -->
  </body>
</html>
