<!-- invoice_detail.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Invoice Detail</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
  </head>
  <body>
    <div class="container mt-5">
      <h2>Invoice Details</h2>
      <div class="card mt-4">
        <div class="card-body">
          <h5 class="card-title">Invoice #{{ invoice.invoice_number }}</h5>
          <p class="card-text">
            <strong>Invoice Date:</strong> {{ invoice.invoice_date }}
          </p>
          <p class="card-text">
            <strong>Due Date:</strong> {{ invoice.due_date }}
          </p>
          <p class="card-text">
            <strong>Customer:</strong> {{ customer_name }}
          </p>
          <p class="card-text">
            <strong>Order Date:</strong> {{ order.order_date }}
          </p>
          <p class="card-text">
            <strong>Status:</strong> {{ invoice.payment_status|capfirst }}
          </p>
          <p class="card-text">
            <strong>Total Amount:</strong> Rs. {{ invoice.amount }}
          </p>
          <hr />
          <h6>Items</h6>
          <table class="table table-bordered mt-3">
            <thead>
              <tr>
                <th>Product</th>
                <th>Unit Price</th>
                <th>Quantity</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              {% for item in products %}
              <tr>
                <td>{{ item.product.name }}</td>
                <td>Rs. {{ item.unit_selling_price|floatformat:2 }}</td>
                <td>{{ item.quantity }}</td>
                <td>Rs. {{ item.total_price|floatformat:2 }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          <div class="text-end mt-3">
            <p><strong>Subtotal:</strong> Rs. {{ subtotal|floatformat:2 }}</p>
            <p><strong>Tax (5%):</strong> Rs. {{ tax|floatformat:2 }}</p>
            <p><strong>Delivery:</strong> Rs. {{ delivery }}</p>
            <hr>
            <h5><strong>Total Amount:</strong> Rs. {{ invoice.amount|floatformat:2 }}</h5>
          </div>
        </div>
      </div>
      <a href="{% url 'invoice_list' %}" class="btn btn-secondary mt-3"
        >Back to Invoices</a
      >
      <a
        href="{% url 'download_invoice_pdf' invoice.pk %}"
        class="btn btn-success mt-3 ms-2"
        >Download as PDF</a
      >
    </div>
  </body>
</html>
